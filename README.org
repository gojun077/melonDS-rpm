#+TITLE: melonDS-rpm
#+SUBTITLE: rpmbuild spec files, scripts for Fedora COPR melonDS build
#+AUTHOR: Peter Jun Koh
#+EMAIL: gopeterjun@naver.com
#+DESCRIPTION:
#+KEYWORDS: linux, rhel, rpm, packaging, spec, fedora, copr
#+LANGUAGE: en

* Summary

- Created on: [2025-11-15 Sat]
- Last Updated: [2025-11-15 Sat 15:35]

This repo contains ~rpm~ package-related config files necessary to package
the open-source =melonDS= Nintendo DS emulator build from C/CPP source.

The resulting ~rpm~ packages are also built by the Fedora COPR build
system for Fedora user-submitted packages in the following project:

https://copr.fedorainfracloud.org/coprs/archjun/melonDS/

* Topics

** How to build melonDS rpm package from this repo

From the project root, run =make build= which will generate the ~rpmbuild~
folder structure:

#+begin_src sh :noeval
  $ tree -d
  .
  ├── BUILD
  ├── RPMS
  ├── SOURCES
  ├── SPECS
  └── SRPMS
#+end_src

The =make build= recipe will also read ~SPECS/melonDS.spec~ for how to
build from C/CPP source using =cmake=.

Note that default upstream https://github.com/melonDS-emu/melonDS strips
out debug info when building from source with =cmake=. However, in this
repo, the ~melonDS.spec~ specifies that debug headers not be stripped
with the following =cmake= options:

#+begin_src cmake
  -DCMAKE_BUILD_TYPE=RelWithDebInfo \
  -DCMAKE_INSTALL_DO_STRIP=OFF \
#+end_src

The ~.rpm~ files will be written to ~RPMS/{aarch64,x86_64}/~
